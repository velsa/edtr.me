{% extends "base_main.html" %}

{% block extra_title %}Home{% endblock %}

{% block extra_head %}
    {{ super() }}
    <!-- JQuery TreeView
    <link rel="stylesheet" href="{{ static_url('treeview/jquery.treeview.css') }}" type="text/css" />
    -->

    <!-- CodeMirror -->
    <link rel="stylesheet" href="{{ static_url('codemirror/lib/codemirror.css') }}">
    <link rel="stylesheet" href="{{ static_url('codemirror/theme/eclipse.css') }}">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ static_url('css/style.css') }}">
    <link rel="stylesheet" href="{{ static_url('css/md_preview/default.css') }}">

{% endblock %} <!-- extra_head -->

{% block body_before_container %}
    {{ super() }}
{% endblock %}

{% block body_container %}
    {{ super() }}
    <!--
        Main view
    -->
    <div id = "main_view" class="row-fluid">
        <!--
            Left navigation sidebar
        -->
        <div id="left_sidebar" class="span3">
            <div class="well sidebar-nav"> <!-- well effect -->
                <ul class="nav nav-list">
                    <form class="form-search" _lpchecked="1">
                        <i class="icon-search icon-black"></i>
                        <input type="text" class="input-large search-query" 
                            placeholder="Find in filesâ€¦"/>
                        <!--<button type="submit" class="btn">Go</button>-->
                    </form>
                    <li class="nav-header" style="height: 30px;">
                            <ul class="nav nav-tabs">
                                <li class="active">
                                    <a href="#">Files in Dropbox:</a>
                                </li>
                                <li class="dropdown" style="text-transform: none;">
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                        Actions<b class="caret"></b>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <a data-toggle="modal" id="action_add_file" href="#">
                                                <i class="icon-file icon-black"></i>
                                                New File...
                                            </a>
                                        </li>
                                        <li>
                                            <a data-toggle="modal" id="action_add_subdir" href="#">
                                                <i class="icon-folder-close icon-black"></i>
                                                New Subdir...
                                            </a>
                                        </li>
                                        <li>
                                            <a data-toggle="modal" id="action_rename" href="#">
                                                <i class="icon-pencil icon-black"></i>
                                                Rename...
                                            </a>
                                        </li>
                                        <li>
                                            <a data-toggle="modal" id="action_delete" href="#">
                                                <i class="icon-trash icon-black"></i>
                                                Delete...
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <img src="{{ static_url('images/refresh-static.gif') }}" 
                                        alt="()"
                                        class="rotate-on-click">
                                </li>
                            </ul>
                    </li>
                    <li id="ul_tree_control" ></li>
                    <li id="db_tree">
                        <!-- Dropbox TreeView will be inserted here with Ajax -->
                    </li>
                </ul>
            </div><!--/well -->
        </div><!--/span-->

        <!--
            Vertical splitter between sidebar and editor area
        -->
        <div class="vertical-splitter">
        </div>

        <!--
            Content area
        -->
        <div id="editor_area" class="span9">
            {% include "editor/cm_stub.html" %}
        </div>
    </div>  <!-- main view -->

    <!--
        Horizontal splitter between sidebar/editor and preview area
    -->
    <div class="horizontal-splitter row-fluid">
    </div>

    <!--
        Preview pane
    -->
    <div class="preview-container row-fluid">
        <div class="preview-area span12">
            <pre class="preview-area-stub">

                Realtime preview will be available here 

                when you select file on the left or create a new one
            </pre>
        </div>
    </div><!--/row-->


    <!--
        Modal dialogs
    -->
    <div id="modal_placeholder"></div>
    <div id="modal_dialogs" style="display:none">
        {% include "editor/modals.html" %}
    </div>
    <!--
        Bar for messages, errors and info
    -->
    <div id="messages_bar"></div>
{% endblock %} <!-- extra_body_html -->


{% block extra_body_js %}
    {{ super() }}
    <!-- jQuery plugins -->

    <!-- JQuery UI -->
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    
    <!-- jQuery TreeView JS
    <script type="text/javascript" src="{{ static_url('treeview/jquery.treeview.js') }}"></script>
     -->

    <!-- JQuery JSTree -->
    <script src="{{ static_url('jstree/jquery.jstree.js') }}"></script>

    <!-- CodeMirror -->
    <script src="{{ static_url('codemirror/lib/codemirror.js') }}"></script>
    <script src="{{ static_url('codemirror/mode/xml/xml.js') }}"></script>
    <script src="{{ static_url('codemirror/mode/markdown/markdown.js') }}"></script>
    <script src="{{ static_url('codemirror/mode/gfm/gfm.js') }}"></script>
    <script src="{{ static_url('codemirror/mode/javascript/javascript.js') }}"></script>
    <script src="{{ static_url('codemirror/lib/util/searchcursor.js') }}"></script>
    <script src="{{ static_url('codemirror/lib/util/match-highlighter.js') }}"></script>

    <!-- Marked (hacked for live preview) -->
    <script src="{{ static_url('js/marked-vels.js') }}"></script>

    <!-- Our own code (order is important !) -->
    <script src="{{ static_url('js/mdb-home-utils.js') }}"></script>
    <script src="{{ static_url('js/mdb-home-codemirror.js') }}"></script>
    <script src="{{ static_url('js/mdb-home-tree.js') }}"></script>
    <script src="{{ static_url('js/mdb-home-modal.js') }}"></script>
    <script src="{{ static_url('js/mdb-home.js') }}"></script>
{% endblock %} <!-- extra_body_js -->
